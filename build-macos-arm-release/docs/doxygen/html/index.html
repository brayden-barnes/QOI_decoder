<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>qoi: QOI Decoder Starter Project</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">qoi
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">QOI Decoder Starter Project </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p ><a class="anchor" id="md__Users_brayden_Documents_School_Fifth_Year_Computer_Security_Assignment1_README"></a> This project is intended to be used as a starting point for writing a decoder for the QOI image format.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Getting Started</h1>
<h2><a class="anchor" id="autotoc_md2"></a>
Pre-Setup</h2>
<p >The first step is to get the template onto your local machine. You can start by making an empty local repository: </p><div class="fragment"><div class="line">$ mkdir -p /path/to/your/local/repo</div>
<div class="line">$ cd /path/to/your/local/repo</div>
<div class="line">$ git init</div>
</div><!-- fragment --><p >Now you can configure a remote connection to the template repository and pull its history into yours. </p><div class="fragment"><div class="line">$ git remote add upstream https://github.com/eced4406/qoi-starter-project.git</div>
<div class="line">$ git pull upstream main</div>
</div><!-- fragment --><p >Your local repository should now be populated with the contents of the template, and you should see commits from yours truly when you run <code>git log</code>.</p>
<p >Now, fetch the git submodules (vcpkg): </p><div class="fragment"><div class="line">$ git submodule update --init</div>
</div><!-- fragment --><p >At this point, you can push your repo up to a hosting service (like GitHub or GitLab) or just keep it local. For more info, see <a href="https://docs.github.com/en/get-started/importing-your-projects-to-github/importing-source-code-to-github/adding-locally-hosted-code-to-github#adding-a-local-repository-to-github-using-git">here</a>.</p>
<h3><a class="anchor" id="autotoc_md3"></a>
Branches</h3>
<p >This will make it easier to submit your assignment and pull in any upstream changes (see below).</p>
<p >You can create and checkout a branch named "assignment" like this: </p><div class="fragment"><div class="line">$ git checkout -b assignment</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md4"></a>
Getting Updates</h3>
<p >Your instructor may need to fix or add some things in the template. If so, there will be new commits on the upstream repo that you'll need to merge into yours. If there are changes, you'll get a notification on Brightspace with instructions. They'll look something like this:</p>
<p >First, pull the changes from the upstream. </p><div class="fragment"><div class="line">$ git checkout main</div>
<div class="line">$ git pull upstream main</div>
<div class="line">$ git log # print the log to review the changes</div>
</div><!-- fragment --><p >Remember, you can run <code>git status</code> to check the state of your repository, including what branch you're currently on.</p>
<p >Then, merge the changes into your working branch. </p><div class="fragment"><div class="line">$ git checkout assignment # or whatever you called your working branch for the first assignment</div>
<div class="line">$ git merge main</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md5"></a>
Setup</h2>
<p >Now that you have the source code on your local machine, we can start to setup the project. There are a few tools that you'll need. Check the platform-specific instructions for tips on installing them.</p>
<p >What you'll need:</p><ul>
<li>CMake v3.23+</li>
<li>Clang v13</li>
<li>Visual Studio Code</li>
</ul>
<p >Choose your own adventure:</p><ul>
<li>Linux</li>
<li>MacOS</li>
<li>Windows</li>
</ul>
<h3><a class="anchor" id="autotoc_md6"></a>
Linux (Ubuntu or Debian)</h3>
<blockquote class="doxtable">
<p >&zwj;ℹ️ Debian-based distributions, such as Ubuntu, are the most common, so I've provided instructions for them. You're welcome to use something else, but you may be on your own when it comes to troubleshooting. If you get this working on another distribution, feel free to share any tips with the class via our discussion board. </p>
</blockquote>
<p>Get started by installing these packages:</p>
<div class="fragment"><div class="line">$ sudo apt-get update</div>
<div class="line">$ sudo apt-get install \</div>
<div class="line">    build-essential \</div>
<div class="line">    curl \</div>
<div class="line">    gdb \</div>
<div class="line">    libx11-dev \</div>
<div class="line">    libxft-dev \</div>
<div class="line">    libxext-dev \</div>
<div class="line">    libsdl2-dev \</div>
<div class="line">    ninja-build \</div>
<div class="line">    pkg-config \</div>
<div class="line">    tar \</div>
<div class="line">    unzip \</div>
<div class="line">    zip</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md7"></a>
1. Install CMake</h4>
<p >If you are using Ubuntu or Debian, you will likely not have the latest CMake available through apt's default repositories. Rather than installing it with apt, you can use install script provided on CMake's download page <a href="https://cmake.org/download/">here</a>.</p>
<div class="fragment"><div class="line">$ cd /tmp</div>
<div class="line">$ wget https://github.com/Kitware/CMake/releases/download/v3.23.2/cmake-3.23.2-linux-x86_64.sh</div>
<div class="line">$ chmod +x cmake-3.23.2-linux-x86_64.sh</div>
<div class="line">$ ./cmake-3.23.2-linux-x86_64.sh --prefix=$HOME/.local --exclude-subdir --skip-license</div>
</div><!-- fragment --><p >Make sure <code>$HOME/.local/bin</code> is prepended to your <code>$PATH</code>. It's common to manage your path in your shell's dotfile in your <code>$HOME</code> directory (e.g. <code>$HOME/.bashrc</code> for bash or <code>$HOME/.zshrc</code> for zsh). Once CMake is installed and made available on your <code>PATH</code>, verify the version:</p>
<div class="fragment"><div class="line">$ cmake --version</div>
<div class="line">cmake version 3.23.2</div>
<div class="line">...</div>
</div><!-- fragment --><p >Alternatively, you can use Python's <code>pip</code> (or even better <code>pipx</code>) to install CMake. This is my preferred method, but your mileage may vary. Here are some links that may prove helpful if you decide to try this approach:</p><ul>
<li><a href="https://github.com/pypa/pipx/#install-pipx">pipx installation</a></li>
<li><a href="https://pypi.org/project/cmake/">cmake pypi package</a></li>
</ul>
<h4><a class="anchor" id="autotoc_md8"></a>
2. Install Clang (and LLVM tools)</h4>
<p >Next, we'll install Clang 13. The LLVM project provides <a href="https://apt.llvm.org/">up-to-date packages for Debian and Ubuntu</a>.</p>
<div class="fragment"><div class="line">$ cd /tmp</div>
<div class="line">$ wget https://apt.llvm.org/llvm.sh</div>
<div class="line">$ chmod +x llvm.sh</div>
<div class="line">$ sudo ./llvm.sh 13 all</div>
</div><!-- fragment --><p >Verify that clang-13 was installed:</p>
<div class="fragment"><div class="line">$ clang-13 --version</div>
<div class="line">Ubuntu clang version 13.0.x</div>
<div class="line">Target: x86_64-pc-linux-gnu</div>
<div class="line">Thread model: posix</div>
<div class="line">InstalledDir: /usr/bin</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md9"></a>
3. Setup VS Code</h4>
<p >Install the C/C++ Extension pack for VS Code (it should be recommended to you when you open the project for the first time). You may need to restart/reload VS Code for this to take effect.</p>
<p >Select the Linux Debug/Release CMake preset depending on what you want to build (I'd recommend starting with Debug).</p>
<h3><a class="anchor" id="autotoc_md10"></a>
MacOS</h3>
<p >Use <a href="https://brew.sh/">Homebrew</a> to install the dependencies.</p>
<div class="fragment"><div class="line">$ brew install cmake ninja llvm@13</div>
</div><!-- fragment --><p >Open the project with Visual Studio Code.</p>
<div class="fragment"><div class="line">$ cd /path/to/qoi</div>
<div class="line">$ code .</div>
</div><!-- fragment --><p >Select the MacOS ARM/Intel Debug/Release CMake configure preset depending on your system and what you want to build (I'd recommend starting on Debug). These presets can be found in <code>CMakePresets.json</code> if you're curious.</p>
<h3><a class="anchor" id="autotoc_md11"></a>
Windows</h3>
<h4><a class="anchor" id="autotoc_md12"></a>
1. Install Visual Studio 2022</h4>
<p >You have two options here. You can either install the full Visual Studio 2022 (Community edition) if you want the Visual Studio IDE. Alternatively, you can just install the build tools. For this course, all you need are the build tools, but you may want the full Visual Studio IDE for other courses or projects.</p><ul>
<li><a href="https://visualstudio.microsoft.com/downloads/#visual-studio-community-2022">Visual Studio 2022 - Community</a></li>
<li><a href="https://visualstudio.microsoft.com/downloads/#build-tools-for-visual-studio-2022">Visual Studio 2022 - Build Tools</a></li>
</ul>
<p >Make sure to select "Desktop Development with C++" when choosing what to install.</p>
<h4><a class="anchor" id="autotoc_md13"></a>
2. Install CMake</h4>
<p >Download and install the "Windows x64 Installer" from the Latest Release section <a href="https://cmake.org/download/">here</a>.</p>
<h4><a class="anchor" id="autotoc_md14"></a>
3. Configure VS Code</h4>
<p >Open the project folder in VS Code and install the recommended extensions. You might need to restart VS Code after installing the extensions.</p>
<p >Open the Command Palette with <code>Ctrl + Shift + P</code> and run "CMake: Configure". It should prompt you to choose a preset; select the one for the version of Visual Studio you have installed (2019 or 2022).</p>
<p >From the Command Palette, run "CMake: Build". Select the "Debug" build preset so you can step through the code.</p>
<h2><a class="anchor" id="autotoc_md15"></a>
Building</h2>
<p >From the Command Palette, run "CMake: Build"</p>
<h2><a class="anchor" id="autotoc_md16"></a>
Running and Debugging</h2>
<p >The qoi_viewer application takes one command line argument: the path to the .qoi file to open. If you just run the application without specifying the path, all you'll see is a help message about how to run the program.</p>
<p >When running from the command line, just add the path (absolute or relative to your current working directory) of a qio file to the end of your command:</p>
<div class="fragment"><div class="line">$ cd build/out/bin # You might have to add Debug or Release to the end on Windows</div>
<div class="line">$ ./qoi_viewer /path/to/your/repo/data/dice.qoi # remember to substitute this path with the real one!</div>
</div><!-- fragment --><p >This is great for a quick test, but you probably want to set up VS Code to build and run the application without having to go to the command line.</p><ul>
<li>Open up the "Run and Debug" menu on the left hand sidebar.</li>
<li>Click "create a launch.json file", and then click "Add Configuration".</li>
<li>Pick the "C/C++: Launch" option (the exact text may different depending on your platform).</li>
<li>Update the "program" field to point to <code>"${command:cmake.launchTargetPath}"</code>.</li>
<li>Add the path to the QOI file you want to open to the "arguments" list.</li>
<li>Save the file.</li>
<li>From the Command Palette, run "CMake: Set Debug Target" and select "qoi_viewer". Now you can launch the viewer by typing F5 or by hitting the green play button at the top of the "Run and Debug" sidebar tab.</li>
</ul>
<p >You can read more about debugging C/C++ projects with VS Code here:</p><ul>
<li><a href="https://code.visualstudio.com/docs/cpp/cpp-debug">https://code.visualstudio.com/docs/cpp/cpp-debug</a></li>
<li><a href="https://vector-of-bool.github.io/docs/vscode-cmake-tools/debugging.html">https://vector-of-bool.github.io/docs/vscode-cmake-tools/debugging.html</a></li>
</ul>
<h2><a class="anchor" id="autotoc_md17"></a>
Benchmark</h2>
<p >Part of your evaluation for this assignment will be based on the results of the benchmark. The benchmark tests your decoder against four different variations of the "testcard_rgba" image.</p><ul>
<li><code>data/benchmark/0.qoi</code> is the simplest image. It uses only the <code>qoi_op_rgb</code> and <code>_rgba</code> types.</li>
<li><code>data/benchmark/1.qoi</code> builds on <code>0.qoi</code> and makes use of the <code>qoi_op_run</code> type.</li>
<li><code>data/benchmark/2.qoi</code> builds on <code>1.qoi</code> and uses the <code>qoi_op_index</code> type.</li>
<li><code>data/benchmark/3.qoi</code> builds on <code>2.qoi</code> and uses the <code>qoi_op_diff</code> and <code>_luma</code> types.</li>
</ul>
<p >To run the benchmark, first make sure you've merged in the latest changes from <code>upstream</code> (see Getting Updates). Then run "CMake: Delete cache and reconfigure". Then select and run the "qoi_benchmark" utility.</p>
<h1><a class="anchor" id="autotoc_md18"></a>
References</h1>
<ul>
<li>QOI <a href="https://qoiformat.org/qoi-specification.pdf">specification</a></li>
<li>QOI <a href="https://github.com/phoboslab/qoi">reference implementation</a></li>
<li>Sy Brand's documentation <a href="https://devblogs.microsoft.com/cppblog/clear-functional-c-documentation-with-sphinx-breathe-doxygen-cmake/">tutorial</a></li>
<li>Victoria Rudakova's documentation <a href="https://vicrucann.github.io/tutorials/quick-cmake-doxygen/">tutorial</a></li>
<li>C++ Weekly - <a href="https://www.youtube.com/watch?v=gO0KBoqkOoU">Fuzz Testing</a> </li>
</ul>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
